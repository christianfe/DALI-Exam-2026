sequenceDiagram
title Soccorso urbano
autonumber

participant Dispatcher

participant DroneScout


participant AmbulanceUnit

participant FireRescueUnit

alt Segnalazione
  Dispatcher->Dispatcher: call_emergency(Loc, Type)\n
else Avvistamento drone
  DroneScout->Dispatcher: report_emergency(Loc, Type)
end

alt Info sufficienti
  Dispatcher->>Dispatcher: emergency_type(Type)
else Info insufficienti
  Dispatcher->DroneScout: request_recognition(Loc)
  DroneScout->Dispatcher: report_emergency(Loc, Type)
end

alt Tipo medico
  Dispatcher->AmbulanceUnit: dispatch(I, Loc)
else Tipo incendio / estricazione
  Dispatcher->FireRescueUnit: dispatch(I, Loc)
end

group Intervento
  alt Richiesta supporto
    AmbulanceUnit->Dispatcher: support_request(I)
    Dispatcher->FireRescueUnit: dispatch(I, Loc)
  else
    FireRescueUnit->Dispatcher: support_request(I)
    Dispatcher->AmbulanceUnit: dispatch(I, Loc)
  end

  AmbulanceUnit->Dispatcher: intervention_complete(I)
  FireRescueUnit->Dispatcher: intervention_complete(I)
  Dispatcher->Dispatcher: close_incident(I)
end
